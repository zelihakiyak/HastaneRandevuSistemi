@model HastaneRandevuSistemi.ViewModels.ChangePasswordViewModel
@{
    Layout = User.IsInRole("Admin") ? "_AdminLayout" : (User.IsInRole("Doctor") ? "_DoctorLayout" : "_Layout");
}

<div class="max-w-md mx-auto mt-10 bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-sm">
    <h2 class="text-2xl font-black text-gray-900 mb-6 uppercase tracking-tighter">Şifre Değiştir</h2>

    <form asp-action="ChangePassword" method="post" class="space-y-4">
        <div asp-validation-summary="ModelOnly" class="text-red-500 text-sm mb-4"></div>

        <div>
            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Mevcut Şifre</label>
            <div class="relative">
                <input asp-for="OldPassword" id="oldPassInput" type="password"
                       class="w-full px-4 py-3 rounded-xl border border-gray-100 outline-none focus:border-red-500 transition-all pr-12" />
                <button type="button" onclick="togglePassword('oldPassInput', this)"
                        class="absolute right-4 top-3.5 text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="bi bi-eye-slash"></i>
                </button>
            </div>
            <span asp-validation-for="OldPassword" class="text-red-500 text-xs mt-1"></span>
        </div>

        <div>
            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Yeni Şifre</label>
            <div class="relative">
                <input asp-for="NewPassword" id="newPassInput" type="password"
                       class="w-full px-4 py-3 rounded-xl border border-gray-100 outline-none focus:border-red-500 transition-all pr-12" />
                <button type="button" onclick="togglePassword('newPassInput', this)"
                        class="absolute right-4 top-3.5 text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="bi bi-eye-slash"></i>
                </button>
            </div>
            <span asp-validation-for="NewPassword" class="text-red-500 text-xs mt-1"></span>
        </div>

        <div>
            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Yeni Şifre Tekrar</label>
            <div class="relative">
                <input asp-for="ConfirmPassword" id="confirmPassInput" type="password"
                       class="w-full px-4 py-3 rounded-xl border border-gray-100 outline-none focus:border-red-500 transition-all pr-12" />
                <button type="button" onclick="togglePassword('confirmPassInput', this)"
                        class="absolute right-4 top-3.5 text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="bi bi-eye-slash"></i>
                </button>
            </div>
            <span asp-validation-for="ConfirmPassword" class="text-red-500 text-xs mt-1"></span>
        </div>

        <button type="submit" class="w-full py-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-2xl transition-all shadow-lg shadow-red-100 uppercase tracking-widest text-sm mt-4">
            Şifreyi Güncelle
        </button>
    </form>
</div>

@section Scripts {
    <script>
        function togglePassword(inputId, btn) {
            const input = document.getElementById(inputId);
            const icon = btn.querySelector('i');

            if (input.type === "password") {
                input.type = "text";
                icon.classList.replace('bi-eye-slash', 'bi-eye');
            } else {
                input.type = "password";
                icon.classList.replace('bi-eye', 'bi-eye-slash');
            }
        }
    </script>
}